@c -*-texinfo-*-
@c This is part of the GNU Emacs Lisp Reference Manual.
@c Copyright (C) 1990--1993, 1998, 2001--2020 Free Software Foundation,
@c Inc.
@c See the file elisp.texi for copying conditions.
@node 标准钩子
@appendix 标准钩子
@cindex 标准钩子
@cindex 钩子变量列表

以下是一些钩子变量的列表，可让您提供在合适的情况下从Emacs内部调用的函数。

其中大多数变量的名称以@samp{-hook}结尾。它们是@dfn{标准钩子}，通过
@code{run-hooks}运行。这样的钩子的值是一组函数列表。调用函数时不带参数，
其值将被完全忽略。推荐使用的新函数放在此类挂钩上的方法是调用
@code{add-hook}。@xref{Hooks}，以获取有关使用钩子的更多信息。

以@samp{-functions}结尾的变量通常是@dfn{不正常的钩子}一些旧代码也可能
使用不推荐使用的@samp{-hooks}后缀）；它们的值是一组函数列表，但是这些函数
以特殊的方式调用（它们是传递的参数，或者使用了它们的返回值）。名称以
@samp{-function}结尾的变量具有单个函数作为其值。

这不是一个详尽的清单，它仅涵盖更通用的钩子。例如，每个主要模式都定义一个名
为@samp{@var{modename}-mode-hook}的钩子。主要模式命令使用最后的
@code{run-mode-hooks}运行此普通钩子。@xref {模式钩子}。大多数次要模式也具
有模式钩子。

一项特殊特性允许您指定表达式以评估是否以及何时加载文件（
@pxref{加载时的钩子}）。该特性不完全是一个钩子，但可以完成类似的工作。

@c We need to xref to where each hook is documented or else document it here.
@c Add vindex for anything not indexed elsewhere.
@c This list is in alphabetical order, grouped by topic.
@c TODO It should probably be more thoroughly ordered by topic.

@table @code
@item activate-mark-hook
@itemx deactivate-mark-hook
@xref{标志区}.

@item after-change-functions
@itemx before-change-functions
@itemx first-change-hook
@xref{改变钩子}.

@item after-change-major-mode-hook
@itemx change-major-mode-after-body-hook
@xref{模式钩子}.

@item after-init-hook
@itemx before-init-hook
@itemx emacs-startup-hook
@itemx window-setup-hook
@xref{初始化文件}.

@item after-insert-file-functions
@itemx write-region-annotate-functions
@itemx write-region-post-annotation-function
@xref{格式转换}.

@item after-make-frame-functions
@itemx before-make-frame-hook
@itemx server-after-make-frame-hook
@xref{创建帧}.

@c Not general enough?
@ignore
@item after-revert-hook
@itemx before-revert-hook
@itemx buffer-stale-function
@itemx revert-buffer-function
@itemx revert-buffer-insert-file-contents-function
@xref{Reverting}.
@end ignore

@item after-save-hook
@itemx before-save-hook
@itemx write-contents-functions
@itemx write-file-functions
@xref{保存缓写区}.

@item after-setting-font-hook
@vindex after-setting-font-hook
帧字体更改后，运行钩子。

@item auto-save-hook
@xref{自动保存}.

@item before-hack-local-variables-hook
@itemx hack-local-variables-hook
@xref{文件局部变量}.

@item buffer-access-fontify-functions
@xref{懒属性}.

@item buffer-list-update-hook
@vindex buffer-list-update-hook
缓写区列表更改时钩子运行(@pxref{缓写区列表}).

@item buffer-quit-function
@vindex buffer-quit-function
退出当前缓写区调用的函数。

@item change-major-mode-hook
@xref{创建缓写区本地}.

@item comint-password-function
此异常钩子允许派生模式在不提示用户的情况下为基础命令解释器提供密码。

@item command-line-functions
@xref{命令行参数}.

@item delayed-warnings-hook
@vindex delayed-warnings-hook
The command loop runs this soon after @code{post-command-hook} (q.v.).

@item focus-in-hook
@vindex focus-in-hook
@itemx focus-out-hook
@vindex focus-out-hook
@xref{Input Focus}.

@item delete-frame-functions
@itemx after-delete-frame-functions
@xref{Deleting Frames}.

@item delete-terminal-functions
@xref{Multiple Terminals}.

@item pop-up-frame-function
@itemx split-window-preferred-function
@xref{Choosing Window Options}.

@item echo-area-clear-hook
@xref{Echo Area Customization}.

@item find-file-hook
@itemx find-file-not-found-functions
@xref{Visiting Functions}.

@item font-lock-extend-after-change-region-function
@xref{Region to Refontify}.

@item font-lock-extend-region-functions
@xref{Multiline Font Lock}.

@item font-lock-fontify-buffer-function
@itemx font-lock-fontify-region-function
@itemx font-lock-mark-block-function
@itemx font-lock-unfontify-buffer-function
@itemx font-lock-unfontify-region-function
@xref{Other Font Lock Variables}.

@item fontification-functions
@xref{Auto Faces,, Automatic Face Assignment}.

@item frame-auto-hide-function
@xref{Quitting Windows}.

@item quit-window-hook
@xref{Quitting Windows}.

@item kill-buffer-hook
@itemx kill-buffer-query-functions
@xref{杀死缓写区}.

@item kill-emacs-hook
@itemx kill-emacs-query-functions
@xref{杀死emacs}.

@item menu-bar-update-hook
@xref{菜单栏}.

@item minibuffer-setup-hook
@itemx minibuffer-exit-hook
@xref{迷你缓写区相关}.

@item mouse-leave-buffer-hook
@vindex mouse-leave-buffer-hook
使用鼠标命令即将切换窗口时，钩子运行。

@item mouse-position-function
@xref{Mouse Position}.

@item prefix-command-echo-keystrokes-functions
@vindex prefix-command-echo-keystrokes-functions
由前缀命令（例如@kbd{C-u}）运行的异常钩子，该钩子应返回描述当前前缀状态
的字符串。例如，@kbd{C-u}生成@samp{C-u-}和@samp{C-u 1 2 3-}。每个钩子
函数均不带任何参数调用，并且应返回描述当前前缀状态的字符串，如果没有前缀
状态，则返回@code{nil}。@xref{前缀命令参数}。

@item prefix-command-preserve-state-hook
@vindex prefix-command-preserve-state-hook
当前缀命令需要通过将当前前缀命令状态传递给下一个命令来保留前缀时，钩子运行。 例如，当用户键入@kbd {C-u-}或在@kbd {C-u}后面加上数字时，@ kbd {C-u}需要将状态传递给下一个命令。
Hook run when a prefix command needs to preserve the prefix by passing
the current prefix command state to the next command.  For example,
@kbd{C-u} needs to pass the state to the next command when the user
types @kbd{C-u -} or follows @kbd{C-u} with a digit.

@item pre-redisplay-functions
Hook run in each window just before redisplaying it.  @xref{Forcing
Redisplay}.

@item post-command-hook
@itemx pre-command-hook
@xref{Command Overview}.

@item post-gc-hook
@xref{Garbage Collection}.

@item post-self-insert-hook
@xref{Keymaps and Minor Modes}.

@ignore
@item prog-mode-hook
@itemx special-mode-hook
@vindex special-mode-hook
@xref{Basic Major Modes}.
@end ignore

@item suspend-hook
@itemx suspend-resume-hook
@itemx suspend-tty-functions
@itemx resume-tty-functions
@xref{Suspending Emacs}.

@item syntax-begin-function
@itemx syntax-propertize-extend-region-functions
@itemx syntax-propertize-function
@itemx font-lock-syntactic-face-function
@xref{Syntactic Font Lock}.  @xref{Syntax Properties}.

@item temp-buffer-setup-hook
@itemx temp-buffer-show-function
@itemx temp-buffer-show-hook
@xref{Temporary Displays}.

@item tty-setup-hook
@xref{Terminal-Specific}.

@item window-configuration-change-hook
@itemx window-scroll-functions
@itemx window-size-change-functions
@xref{Window Hooks}.
@end table

@ignore
Some -hook, -function, -functions from preloaded Lisp or C files that
I thought did not need to be mentioned here:

Lisp:
after-load-functions
after-set-visited-file-name-hook
auto-coding-functions
choose-completion-string-functions
completing-read-function
completion-annotate-function
completion-at-point-functions
completion-list-insert-choice-function
deactivate-current-input-method-function
describe-current-input-method-function
font-lock-function
menu-bar-select-buffer-function
read-file-name-function
replace-re-search-function
replace-search-function
yank-undo-function

C hooks:
kbd-macro-termination-hook
signal-hook-function

C functions:
redisplay-end-trigger-functions
x-lost-selection-functions
x-sent-selection-functions

C function:
auto-composition-function
auto-fill-function
command-error-function
compose-chars-after-function
composition-function-table
deferred-action-function
input-method-function
load-read-function
load-source-file-function
read-buffer-function
ring-bell-function
select-safe-coding-system-function
set-auto-coding-function
show-help-function
signal-hook-function
undo-outer-limit-function

@end ignore
